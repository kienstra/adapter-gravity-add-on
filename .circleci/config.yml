version: 2.1

jobs:
  php-lint:
    docker:
      - image: cimg/php:8.0
    steps:
      - checkout
      - run:
          name: Linting PHP
          command: |
            composer i
            composer lint

  php-test:
    docker:
      - image: cimg/php:8.1
    steps:
      - checkout
      - run:
          name: Linting PHP
          command: |
            composer i
            composer test

workflows:
  test-flow:
    jobs:
      - php-lint
      - php-test
